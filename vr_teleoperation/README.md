# VR Teleoperation for Dual Arm Robots π¤–π¤–

## π‰ μ–‘ν” VR ν…”λ μ¤νΌλ μ΄μ… μ„±κ³µ!

Meta Quest 2λ¥Ό μ΄μ©ν• OpenManipulator-X μ–‘ν” μ μ–΄ μ‹μ¤ν… κµ¬ν„ μ™„λ£

## π“‹ μ‹μ¤ν… κµ¬μ„±

### μ•„ν‚¤ν…μ²
```
Meta Quest 2 Controllers (Left & Right)
         β†“
    Docker (ROS1 + quest2ros)
         β†“
    Host (ROS2 Bridge)
         β†“
    dual_arm_bridge.py
         β†“ (Socket 12345)
    mujoco_mirror.py (μ‹λ®¬λ μ΄μ…)
    λλ”
    mirror_dual_robot.py (μ‹¤λ¬Ό λ΅λ΄‡)
```

## π€ μ‹¤ν–‰ λ°©λ²•

### 1. MuJoCo μ‹λ®¬λ μ΄μ…

#### μλ™ μ‹¤ν–‰:
```bash
cd ~/CookingBot_2025/vr_teleoperation
./start_dual_arm.sh
```

#### μλ™ μ‹¤ν–‰:
```bash
# ν„°λ―Έλ„ 1 - ROS2 λΈλ¦Ώμ§€
python3 dual_arm_bridge.py

# ν„°λ―Έλ„ 2 - MuJoCo μ‹λ®¬λ μ΄ν„°
python3 mujoco_mirror.py
```

### 2. μ‹¤λ¬Ό λ΅λ΄‡ (κ°λ° μμ •)

Namespace λ°©μ‹μ„ μ‚¬μ©ν• μ–‘ν” μ μ–΄ κµ¬ν„ μμ •

## π“ μ£Όμ” νμΌ

### ν•µμ‹¬ μ¤ν¬λ¦½νΈ
- `dual_arm_bridge.py`: μ–‘ν” VR λ°μ΄ν„° μ²λ¦¬ λ° μ „μ†΅
- `mujoco_mirror.py`: MuJoCo μ–‘ν” μ‹λ®¬λ μ΄ν„°
- `start_dual_arm.sh`: μλ™ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ

### XML νμΌ
- `scene_dual.xml`: μ–‘ν” λ΅λ΄‡ μ”¬ μ •μ
- `omx.xml`: μ™Όν” λ΅λ΄‡ μ •μ
- `omx_r.xml`: μ¤λ¥Έν” λ΅λ΄‡ μ •μ (μμ •λ¨)

## π”§ ν•΄κ²°ν• μ£Όμ” λ¬Έμ λ“¤

### 1. μ¤λ¥Έν” Joint1 λ¬Έμ 
- **λ¬Έμ **: μ¤λ¥Έν” Joint1(μΆμ° νμ „)μ΄ μ‘λ™ν•μ§€ μ•μ
- **μ›μΈ**: `omx_r.xml`μ λ¶ν•„μ”ν• `arm_base_r` body κ³„μΈµ
- **ν•΄κ²°**: body κµ¬μ΅°λ¥Ό μ™Όν”κ³Ό λ™μΌν•κ² μμ •

### 2. Yμ¶• λ°μ „ λ¬Έμ 
- **λ¬Έμ **: μ¤λ¥Έν”μ΄ μΆμ° λ°λ€λ΅ μ›€μ§μ„
- **μ›μΈ**: μ–‘ν”μ΄ κ°™μ€ λ°©ν–¥μ„ λ°”λΌλ³΄λ”λ° κ°™μ€ Yμ¶• μ‚¬μ©
- **ν•΄κ²°**: `mujoco_mirror.py`μ—μ„ μ¤λ¥Έν” Joint1 κ°’ λ°μ „

### 3. λ‹¨μΌ μ†μΌ“ ν†µμ‹ 
- **λ¬Έμ **: λ‘ κ°μ λΈλ¦Ώμ§€ μ‚¬μ© μ‹ μ§€μ—° λ°μƒ
- **ν•΄κ²°**: ν•λ‚μ λΈλ¦Ώμ§€λ΅ μ–‘ν” λ°μ΄ν„° ν†µν•© μ „μ†΅

## π® μ΅°μ‘ λ°©λ²•

- **μ™Όμ½ VR μ»¨νΈλ΅¤λ¬** β†’ μ™Όμ½ λ΅λ΄‡ν”
- **μ¤λ¥Έμ½ VR μ»¨νΈλ΅¤λ¬** β†’ μ¤λ¥Έμ½ λ΅λ΄‡ν”
- **νΈλ¦¬κ±°** β†’ κ·Έλ¦¬νΌ μ μ–΄
- **A+B λ²„νΌ** β†’ μ¬μΊλ¦¬λΈλ μ΄μ…

## π“ κΈ°μ  μ¤νƒ

- **VR**: Meta Quest 2 + quest2ros
- **μ‹λ®¬λ μ΄μ…**: MuJoCo
- **λ΅λ΄‡**: OpenManipulator-X (λ“€μ–Ό)
- **ν†µμ‹ **: ROS2 + Socket
- **μ μ–΄**: KD-Tree κΈ°λ° μ΅°μΈνΈ λ§¤ν•‘

## π”® ν–¥ν›„ κ³„ν

### 1. μ‹¤λ¬Ό λ΅λ΄‡ μ—°κ²°
- Namespace λ°©μ‹μΌλ΅ μ–‘ν” λ…λ¦½ μ μ–΄
- OpenCR ν•λ‚λ΅ ID 11-15 (μ™Όν”), 21-25 (μ¤λ¥Έν”) μ μ–΄

### 2. Launch νμΌ κµ¬μ„±
```python
# dual_arm_hardware.launch.py
- ν•λ“μ›¨μ–΄ μΈν„°νμ΄μ¤ (ν•λ‚)
- μ™Όν” μ»¨νΈλ΅¤λ¬ (namespace: left_arm)
- μ¤λ¥Έν” μ»¨νΈλ΅¤λ¬ (namespace: right_arm)
```

### 3. mirror_dual_robot.py κ°λ°
- mirror1.py κΈ°λ° μ–‘ν” λ²„μ „
- κ° ν”λ³„ λ…λ¦½μ μΈ ν† ν”½ λ°ν–‰

## π“ μ°Έκ³ μ‚¬ν•­

- Joint4 μ§κ΄€μ  μ μ–΄ κµ¬ν„ (μ†λ© νμ „)
- μ•μ „ λ²”μ„ μ ν• μ μ©
- μ‹¤μ‹κ°„ μ¤λ¬΄λ”© μ²λ¦¬

---
*2024.08.23 - μ–‘ν” VR ν…”λ μ¤νΌλ μ΄μ… MuJoCo μ‹λ®¬λ μ΄μ… μ„±κ³µ*